<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>For Shahad</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&family=Great+Vibes&display=swap"
    rel="stylesheet" />
  <style>
    :root {
      --bg1: #fbe8ff;
      --bg2: #ffd9e3;
      --bg3: #d9e3ff;
      --card-bg: rgba(255, 255, 255, 0.65);
      --card-border: rgba(255, 255, 255, 0.8);
      --accent-strong: #c855a6;
      --accent-soft: #6b4dd8;
      --text-main: #4a3058;
      --text-soft: #9b6c9e;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Poppins", sans-serif;
      min-height: 100vh;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      perspective: 1000px; /* Essential for 3D effect */
      background:
        radial-gradient(circle at 0% 0%, rgba(255, 255, 255, 0.9), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(255, 255, 255, 0.9), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
      background-size: 200% 200%;
      animation: bgShift 18s ease-in-out infinite alternate;
      cursor: none; /* We will use a custom cursor */
    }

    /* Custom Cursor Styles */
    .cursor-dot,
    .cursor-outline {
      position: fixed;
      top: 0;
      left: 0;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      z-index: 9999;
      pointer-events: none;
    }

    .cursor-dot {
      width: 5px;
      height: 5px;
      background-color: var(--accent-strong);
    }

    .cursor-outline {
      width: 30px;
      height: 30px;
      border: 1px solid var(--accent-strong);
      transition: width 0.2s, height 0.2s, top 0.1s, left 0.1s;
    }
    
    /* Magic Trail Particles */
    .magic-particle {
      position: absolute;
      pointer-events: none;
      background: white;
      border-radius: 50%;
      animation: fadeOut 1s forwards;
      box-shadow: 0 0 10px var(--accent-soft);
      z-index: 9998;
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
        transform: scale(0);
      }
    }

    @keyframes bgShift {
      0% { background-position: 0% 0%; }
      50% { background-position: 60% 100%; }
      100% { background-position: 100% 0%; }
    }

    .intro-fog {
      position: fixed;
      inset: 0;
      z-index: 900;
      background: radial-gradient(circle at 50% 30%, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.85) 40%, rgba(255, 255, 255, 0.4) 70%, transparent 100%);
      backdrop-filter: blur(18px);
      animation: fogFade 2.6s ease-out 1s forwards;
      pointer-events: none;
    }

    @keyframes fogFade {
      0% { opacity: 1; }
      40% { opacity: 0.9; }
      80% { opacity: 0.3; }
      100% { opacity: 0; visibility: hidden; }
    }

    .intro-line {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      height: 1.5px;
      width: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.9), transparent);
      box-shadow: 0 0 14px rgba(255, 255, 255, 0.9), 0 0 28px rgba(255, 200, 240, 0.8);
      z-index: 950;
      animation: introLine 2.1s ease-out 1s forwards;
      pointer-events: none;
    }

    @keyframes introLine {
      0% { width: 0; opacity: 0; }
      25% { width: 120px; opacity: 1; }
      60% { width: 320px; opacity: 1; }
      100% { width: 420px; opacity: 0; }
    }

    .floating-letters {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      gap: 8px;
      font-family: "Poppins", sans-serif;
      font-size: 30px;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--accent-strong);
      z-index: 930;
      pointer-events: none;
    }

    .floating-letters span {
      opacity: 0;
      animation: floatAssemble 2.1s ease-out forwards;
    }

    .floating-letters span:nth-child(1) { animation-delay: 1.1s; }
    .floating-letters span:nth-child(2) { animation-delay: 1.16s; }
    .floating-letters span:nth-child(3) { animation-delay: 1.22s; }
    .floating-letters span:nth-child(4) { animation-delay: 1.28s; }
    .floating-letters span:nth-child(5) { animation-delay: 1.34s; }
    .floating-letters span:nth-child(6) { animation-delay: 1.40s; }

    @keyframes floatAssemble {
      0% { opacity: 0; transform: translate3d(-18px, 18px, 0) scale(0.9); }
      30% { opacity: 1; }
      70% { opacity: 1; transform: translate3d(0, 0, 0) scale(1); }
      100% { opacity: 0; transform: translate3d(0, -8px, 0) scale(0.98); }
    }

    /* 3D Container Wrapper to help with Tilt */
    .card-container {
      position: relative;
      z-index: 3;
      width: 100%;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      transform-style: preserve-3d;
    }

    .card {
      position: relative;
      width: 90%;
      max-width: 520px;
      padding: 40px 30px 35px;
      border-radius: 28px;
      /* Glassmorphism enhanced */
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.3));
      border: 1px solid rgba(255, 255, 255, 0.9);
      box-shadow: 
        0 20px 50px rgba(0,0,0,0.05),
        0 0 0 1px rgba(255,255,255,0.4) inset;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      text-align: center;
      opacity: 0;
      transform: translateY(28px) scale(0.96);
      /* Transition only for opacity/transform during entrance. We remove it later via JS for smooth tilt */
      transition: opacity 1s ease-out, transform 1s ease-out, box-shadow 0.3s ease; 
      overflow: hidden;
      transform-style: preserve-3d; /* Important for inner elements depth */
    }

    .card.show-card {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    /* Shine effect */
    .card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,0.6) 50%, transparent 70%);
      transform: translateX(-100%);
      transition: 0.5s;
      pointer-events: none;
      z-index: 10;
    }

    .card.show-card::before {
      animation: cardSweep 2.5s ease-out 1s forwards;
    }

    @keyframes cardSweep {
      0% { transform: translateX(-140%) skewX(-12deg); opacity: 0; }
      10% { opacity: 1; }
      100% { transform: translateX(140%) skewX(-12deg); opacity: 0; }
    }

    .halo-ring {
      position: absolute;
      inset: 14px;
      border-radius: 22px;
      border: 1px solid rgba(255, 200, 240, 0.6);
      pointer-events: none;
      opacity: 0.6;
      transform: translateZ(20px); /* 3D Depth */
    }

    .script-title {
      font-family: "Great Vibes", cursive;
      font-size: 36px;
      color: var(--accent-strong);
      margin-bottom: 8px;
      transform: translateZ(40px); /* Pops out */
      text-shadow: 0 4px 10px rgba(200, 85, 166, 0.15);
    }

    .for {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 6px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      transform: translateZ(30px);
    }

    .name {
      font-size: 24px;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: var(--accent-strong);
      position: relative;
      display: inline-block;
      transform: translateZ(50px); /* Highest pop */
      font-weight: 600;
      background: linear-gradient(45deg, var(--accent-strong), var(--accent-soft));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      opacity: 0;
    }
    
    .card.show-card .name {
      animation: nameBreath 2s ease-out 0.2s forwards;
    }

    @keyframes nameBreath {
      0% { transform: scale(0.88) translateZ(50px); opacity: 0; }
      100% { transform: scale(1) translateZ(50px); opacity: 1; }
    }

    .underline {
      width: 120px;
      height: 2px;
      margin: 20px auto 16px;
      background: linear-gradient(90deg, transparent, var(--accent-strong), transparent);
      opacity: 0.8;
      transform: translateZ(25px);
    }

    .tiny-note {
      font-size: 13px;
      color: var(--text-main);
      opacity: 0.9;
      white-space: pre-line;
      line-height: 1.8;
      max-width: 28em;
      margin: 10px auto 0;
      transform: translateZ(35px);
      min-height: 120px; /* Reserve space for typing */
    }

    /* Fireworks Canvas */
    canvas#fireworks {
      position: fixed;
      inset: 0;
      z-index: 1;
      pointer-events: none;
    }

    @media (max-width: 480px) {
      .card { padding: 30px 20px 25px; }
      .script-title { font-size: 30px; }
      .name { font-size: 20px; }
      .tiny-note { font-size: 12px; }
      /* Disable cursor logic on mobile to prevent clutter */
      .cursor-dot, .cursor-outline { display: none; }
      body { cursor: auto; }
    }
  </style>
</head>

<body>
  <div class="cursor-dot"></div>
  <div class="cursor-outline"></div>

  <div class="intro-fog"></div>
  <div class="intro-line"></div>

  <div class="floating-letters">
    <span>S</span>
    <span>H</span>
    <span>A</span>
    <span>H</span>
    <span>A</span>
    <span>D</span>
  </div>

  <canvas id="fireworks"></canvas>

  <div class="card-container" id="cardContainer">
    <div class="card" id="card">
      <div class="halo-ring"></div>

      <div class="script-title">Happy New Year</div>

      <div class="for">FOR</div>
      <div class="name">SHAHAD</div>

      <div class="underline"></div>

      <div class="tiny-note" id="typewriterText"></div>
    </div>
  </div>

  <script>
    /* --- 1. Custom Cursor & Magic Dust Logic --- */
    const cursorDot = document.querySelector('.cursor-dot');
    const cursorOutline = document.querySelector('.cursor-outline');

    window.addEventListener('mousemove', (e) => {
      const posX = e.clientX;
      const posY = e.clientY;

      // Move main cursor
      cursorDot.style.left = `${posX}px`;
      cursorDot.style.top = `${posY}px`;

      // Lag effect for outline
      cursorOutline.animate({
        left: `${posX}px`,
        top: `${posY}px`
      }, { duration: 500, fill: "forwards" });

      // Create Magic Dust
      if(Math.random() > 0.8) createMagicDust(posX, posY);
    });

    function createMagicDust(x, y) {
      const particle = document.createElement('div');
      particle.classList.add('magic-particle');
      document.body.appendChild(particle);

      const size = Math.random() * 4 + 2;
      particle.style.width = `${size}px`;
      particle.style.height = `${size}px`;
      particle.style.left = `${x}px`;
      particle.style.top = `${y}px`;
      
      const destinationX = x + (Math.random() - 0.5) * 50;
      const destinationY = y + (Math.random() - 0.5) * 50;

      particle.animate([
        { transform: `translate(0, 0) scale(1)`, opacity: 1 },
        { transform: `translate(${destinationX - x}px, ${destinationY - y}px) scale(0)`, opacity: 0 }
      ], {
        duration: 800 + Math.random() * 400,
        easing: 'cubic-bezier(0, .9, .57, 1)',
      }).onfinish = () => particle.remove();
    }

    /* --- 2. Card Reveal & Typewriter --- */
    const fullMessage = `Shahad, happy New Year.
    I wish you a year filled with peace and joy,
    and moments that place a gentle smile on your heart.
    May this new year be kinder and more beautiful for you,
    bringing everything you truly deserveâ€¦
    and may the days ahead carry a purity that reflects your spirit.`;

    const noteElement = document.getElementById('typewriterText');
    let charIndex = 0;

    function typeWriter() {
      if (charIndex < fullMessage.length) {
        noteElement.textContent += fullMessage.charAt(charIndex);
        charIndex++;
        setTimeout(typeWriter, 40); // Typing speed
      }
    }

    window.addEventListener("load", () => {
      const card = document.getElementById("card");
      const container = document.getElementById("cardContainer");
      
      setTimeout(() => {
        card.classList.add("show-card");
        
        // Start typing after card appears
        setTimeout(typeWriter, 1200);

        // Enable 3D Tilt Effect AFTER the entrance animation
        setTimeout(() => {
          // Remove transition for smooth tilt
          card.style.transition = "none";
          
          container.addEventListener("mousemove", (e) => {
            let xAxis = (window.innerWidth / 2 - e.pageX) / 25;
            let yAxis = (window.innerHeight / 2 - e.pageY) / 25;
            // Clamp rotation
            if(xAxis > 10) xAxis = 10; if(xAxis < -10) xAxis = -10;
            if(yAxis > 10) yAxis = 10; if(yAxis < -10) yAxis = -10;

            card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
          });

          // Reset when mouse leaves
          container.addEventListener("mouseleave", () => {
            card.style.transition = "transform 0.5s ease";
            card.style.transform = `rotateY(0deg) rotateX(0deg)`;
          });
          
          container.addEventListener("mouseenter", () => {
            card.style.transition = "none";
          });

        }, 3500); 

      }, 3300);
    });

    /* --- 3. Enhanced Fireworks --- */
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    let w, h;
    let fireworks = [];

    function resize() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    function randomPastel() {
      const colors = [
        "rgba(255, 182, 193, ALPHA)", "rgba(255, 214, 230, ALPHA)",
        "rgba(209, 196, 233, ALPHA)", "rgba(187, 222, 251, ALPHA)",
        "rgba(255, 241, 189, ALPHA)", "rgba(200, 85, 166, ALPHA)"
      ];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    function createFirework() {
      const x = Math.random() * w;
      const y = Math.random() * (h * 0.6); // Top 60% only
      const particlesCount = 40 + Math.random() * 30;
      
      const fw = [];
      for (let i = 0; i < particlesCount; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = Math.random() * 3 + 1;
        const color = randomPastel();
        fw.push({
          x, y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          life: 100 + Math.random() * 50,
          maxLife: 100,
          color: color,
          size: Math.random() * 2 + 1
        });
      }
      fireworks.push(fw);
    }

    setInterval(createFirework, 800);

    function draw() {
      ctx.clearRect(0, 0, w, h);
      ctx.globalCompositeOperation = "lighter";

      for (let i = fireworks.length - 1; i >= 0; i--) {
        const fw = fireworks[i];
        let deadParticles = 0;

        for (let j = fw.length - 1; j >= 0; j--) {
          const p = fw[j];
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.03; // gravity
          p.vx *= 0.99; // friction
          p.life--;

          const alpha = Math.max(0, p.life / p.maxLife);
          if (p.life <= 0) { deadParticles++; continue; }

          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fillStyle = p.color.replace("ALPHA", alpha);
          ctx.fill();
        }
        
        if (deadParticles === fw.length) fireworks.splice(i, 1);
      }

      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>

</html>